{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://opencontextprotocol.org/schemas/ocp-context.json",
  "title": "OCP Context Object",
  "description": "Agent context for Open Context Protocol",
  "type": "object",
  "properties": {
    "context_id": {
      "type": "string",
      "pattern": "^ocp-[a-f0-9]{8,}$",
      "description": "Unique identifier for this context"
    },
    "agent_type": {
      "type": "string",
      "description": "Type of agent creating this context"
    },
    "user": {
      "type": ["string", "null"],
      "description": "User identifier"
    },
    "workspace": {
      "type": ["string", "null"],
      "description": "Current workspace or project path"
    },
    "current_file": {
      "type": ["string", "null"],
      "description": "Currently active file"
    },
    "current_goal": {
      "type": ["string", "null"],
      "description": "Current objective or task"
    },
    "context_summary": {
      "type": ["string", "null"],
      "description": "Summary of current context"
    },
    "error_context": {
      "type": ["string", "null"],
      "description": "Information about current errors or issues"
    },
    "session": {
      "type": "object",
      "description": "Session metadata and tracking",
      "properties": {
        "start_time": {
          "type": "string",
          "format": "date-time",
          "description": "When session started"
        },
        "interaction_count": {
          "type": "integer",
          "description": "Number of interactions in session"
        },
        "agent_type": {
          "type": "string",
          "description": "Type of agent for this session"
        }
      },
      "required": ["start_time", "interaction_count", "agent_type"]
    },
    "history": {
      "type": "array",
      "description": "Interaction history",
      "items": {
        "type": "object",
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "action": {
            "type": "string",
            "description": "Type of action performed"
          },
          "api_endpoint": {
            "type": "string",
            "description": "API endpoint called"
          },
          "result": {
            "type": ["string", "null"],
            "description": "Result of the action"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          }
        },
        "required": ["timestamp", "action"]
      }
    },
    "recent_changes": {
      "type": "array",
      "description": "Recent changes or modifications",
      "items": {
        "type": "string"
      }
    },
    "api_specs": {
      "type": "object",
      "description": "API specifications for enhanced responses",
      "patternProperties": {
        "^[a-zA-Z0-9_-]+$": {
          "type": "string",
          "format": "uri"
        }
      }
    },
    "created_at": {
      "type": "string",
      "format": "date-time"
    },
    "last_updated": {
      "type": "string",
      "format": "date-time"
    }
  },
  "required": [
    "context_id",
    "agent_type", 
    "session",
    "history",
    "api_specs",
    "created_at",
    "last_updated"
  ],
  "additionalProperties": false
}